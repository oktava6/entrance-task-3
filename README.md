## Entrance task 3 ðŸ’ª
[Ð—Ð°Ð´Ð°Ð½Ð¸Ðµ 3](https://academy.yandex.ru/events/frontend/shri_msk-2017/)

## Ð¥Ð¾Ð´ Ð¼Ñ‹ÑÐ»ÐµÐ¹
Ð’ Ñ‚ÐµÐºÑÑ‚Ðµ Ð·Ð°Ð´Ð°Ð½Ð¸Ñ Ð½Ð°ÑˆÐµÐ» ÑƒÐ¿Ð¾Ð¼Ð¸Ð½Ð°Ð½Ð¸Ðµ Ð¾ ServiceWorkers, Ñ ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¼Ð¸ Ñ€Ð°Ð½ÑŒÑˆÐµ Ð½Ðµ ÑÑ‚Ð°Ð»ÐºÐ¸Ð²Ð°Ð»ÑÑ. ÐŸÐ¾Ñ‡Ð¸Ñ‚Ð°Ð² Ð¿Ñ€Ð¾ Ð½Ð¸Ñ… Ð½Ð° MDN Ð¸ Ð¥Ð°Ð±Ñ€Ðµ, Ð° Ñ‚Ð°ÐºÐ¶Ðµ Ð¾Ð¿Ñ€Ð¾Ð±Ð¾Ð²Ð°Ð² Ð¸Ñ… Ð² Ð´Ð¾Ð¼Ð°ÑˆÐ½Ð¸Ñ… Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°Ñ…, Ð¿Ñ€Ð¸ÑÑ‚ÑƒÐ¿Ð¸Ð» Ðº Ð¸Ð·ÑƒÑ‡ÐµÐ½Ð¸ÑŽ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ Ð¸Ð· Ð·Ð°Ð´Ð°Ð½Ð¸Ñ.  

Ð¤Ð¾Ñ€ÐºÐ½ÑƒÐ» Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹, ÑÐºÐ»Ð¾Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð» Ð½Ð° ÐºÐ¾Ð¼Ð¿ÑŒÑŽÑ‚ÐµÑ€. Ð’ readme Ð¿Ñ€Ð¾Ñ‡Ð¸Ñ‚Ð°Ð», Ñ‡Ñ‚Ð¾ Ð²Ñ…Ð¾Ð´Ð½Ð¾Ð¹ Ñ‚Ð¾Ñ‡Ð½Ð¾Ð¹ ÑÐ²Ð»ÑÐµÑ‚ÑÑ gifs.html. Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ð» Ð² Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¸ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° http-ÑÐµÑ€Ð²ÐµÑ€ Ð¸ Ð¾Ð±Ñ€Ð°Ñ‚Ð¸Ð»ÑÑ Ðº ÑÑ‚Ð¾Ð¼Ñƒ Ñ„Ð°Ð¹Ð»Ñƒ Ð² Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€Ðµ. Ð’ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ðµ ÑƒÐ²Ð¸Ð´ÐµÐ» Ñ€Ð°Ð±Ð¾Ñ‚Ð¾ÑÐ¿Ð¾ÑÐ¾Ð±Ð½Ð¾Ðµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ, ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ðµ ÑƒÐ¼ÐµÐµÑ‚ Ð²ÑÐµ, Ñ‡Ñ‚Ð¾ Ð½Ð°Ð¿Ð¸ÑÐ°Ð½Ð¾ Ð² Ñ‚ÐµÐºÑÑ‚Ðµ Ð·Ð°Ð´Ð°Ð½Ð¸Ñ, ÐºÑ€Ð¾Ð¼Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ð±ÐµÐ· Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ Ðº ÑÐµÑ‚Ð¸: Ñ Ð³Ð°Ð»Ð¾Ñ‡ÐºÐ¾Ð¹ offline Ð² devtools Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€ Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°Ð» Ð´Ð¸Ð½Ð¾Ð·Ð°Ð²Ñ€Ð°.  

ÐŸÑ€Ð¸ÑÑ‚ÑƒÐ¿Ð¸Ð» Ðº Ð¸Ð·ÑƒÑ‡ÐµÐ½Ð¸ÑŽ Ð¸ÑÑ…Ð¾Ð´Ð½Ð¾Ð³Ð¾ ÐºÐ¾Ð´Ð°. Ð’ Ñ„Ð°Ð¹Ð»Ðµ blocks.js Ð¾Ð±Ð½Ð°Ñ€ÑƒÐ¶Ð¸Ð» Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ kv-keeper, jQuery Ð¸ bem-components, Ñ ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¼ Ñ€Ð°Ð·Ð±Ð¸Ñ€Ð°Ð»ÑÑ Ð´Ð¾Ð²Ð¾Ð»ÑŒÐ½Ð¾ Ð´Ð¾Ð»Ð³Ð¾ Ð¸Ð·-Ð·Ð° Ð½ÐµÐ¿Ñ€Ð¸Ð²Ñ‹Ñ‡Ð½Ð¾Ð³Ð¾ Ð¿Ð¾Ð´Ñ…Ð¾Ð´Ð° Ðº Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸ÑŽ Ð±Ð»Ð¾ÐºÐ¾Ð². Ð’ Ð±Ð»Ð¾ÐºÐµ service-worker Ð½Ð°ÑˆÐµÐ» Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸ÑŽ ServiceWorker, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð½Ð°Ñ…Ð¾Ð´Ð¸Ñ‚ÑÑ Ð² Ñ„Ð°Ð¹Ð»Ðµ ./assets/service-worker.js. ÐÐ°Ñ‡Ð°Ð» ÐµÐ³Ð¾ ÑÐ¼Ð¾Ñ‚Ñ€ÐµÑ‚ÑŒ Ð¸ ÑÑ€Ð°Ð·Ñƒ ÑƒÐ²Ð¸Ð´ÐµÐ» ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÑƒÑŽ ÑÑ‚Ñ€Ð¾Ñ‡ÐºÑƒ:
```
importScripts('../vendor/kv-keeper.js-1.0.4/kv-keeper.js');
```
Ð’ [ÑÑ‚Ð°Ñ‚ÑŒÐµ](https://developer.mozilla.org/ru/docs/Web/API/Service_Worker_API/Using_Service_Workers) Ð½Ð° MDN Ð±Ñ‹Ð»Ð¾ Ð½Ð°Ð¿Ð¸ÑÐ°Ð½Ð¾: "ÐœÐ°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ð°Ñ Ð²Ð¸Ð´Ð¸Ð¼Ð¾ÑÑ‚ÑŒ scope ÑÐµÑ€Ð²Ð¸Ñ-Ð²Ð¾Ñ€ÐºÐµÑ€Ð° Ñ€Ð°Ð²Ð½Ð° ÐµÐ³Ð¾ location". Ð­Ñ‚Ð¾ Ð·Ð½Ð°Ñ‡Ð¸Ñ‚, Ñ‡Ñ‚Ð¾ ServiceWorker Ð½Ðµ ÑÐ¼Ð¾Ð¶ÐµÑ‚ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ð´Ð¾ÑÑ‚ÑƒÐ¿ Ðº Ñ€ÐµÑÑƒÑ€ÑÐ°Ð¼, Ð½Ð°Ñ…Ð¾Ð´ÑÑ‰Ð¸Ð¼ÑÑ Ð²Ñ‹ÑˆÐµ ÐµÐ³Ð¾ Ð¾Ð±Ð»Ð°ÑÑ‚Ð¸ Ð²Ð¸Ð´Ð¸Ð¼Ð¾ÑÑ‚Ð¸, Ð° Ð¸Ð¼ÐµÐ½Ð½Ð¾ Ðº "../vendor". Ð’Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾, Ð´Ð¾ Ñ€ÐµÑ„Ð°ÐºÑ‚Ð¾Ñ€Ð¸Ð½Ð³Ð° Ð¿Ð¾Ð´ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸ÐµÐ¼ "Ð Ð°Ð·Ð»Ð¾Ð¶Ð¸Ñ‚ÑŒ Ñ„Ð°Ð¹Ð»Ñ‹ ÐºÑ€Ð°ÑÐ¸Ð²Ð¾" ServiceWorker Ð½Ð°Ñ…Ð¾Ð´Ð¸Ð»ÑÑ Ð² ÐºÐ¾Ñ€Ð½ÐµÐ²Ð¾Ð¹ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¸.  

ÐŸÐµÑ€ÐµÐ¼ÐµÑÑ‚Ð¸Ð» ServiceWorker Ð² ÐºÐ¾Ñ€ÐµÐ½ÑŒ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°, Ð¸Ð·Ð¼ÐµÐ½Ð¸Ð» Ð²ÑÐµ Ð¾Ñ‚Ð½Ð¾ÑÐ¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ð¿ÑƒÑ‚Ð¸ Ð¸ Ð¿ÐµÑ€ÐµÐ·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ð» ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñƒ Ñ Ð¾Ñ‡Ð¸ÑÑ‚ÐºÐ¾Ð¹ ÐºÑÑˆÐ°. Ð’ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ðµ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ð» ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð² ÐºÐ¾Ð½ÑÐ¾Ð»Ð¸ Ð¾Ð± ÑƒÑÐ¿ÐµÑˆÐ½Ð¾Ð¹ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐµ Ð¸ Ð°ÐºÑ‚Ð¸Ð²Ð°Ñ†Ð¸Ð¸ ServiceWorker-Ð°. ÐŸÑ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð½Ð°ÑƒÑ‡Ð¸Ð»Ð¾ÑÑŒ Ð² offline Ð±Ñ€Ð°Ñ‚ÑŒ Ñ€ÐµÑÑƒÑ€ÑÑ‹ Ð¸Ð· ÐºÑÑˆÐ°:  

![Screenshot](https://github.com/oktava6/imhonet_tasks/blob/master/task2/inet.png)

ÐŸÑ€Ð°Ð²Ð´Ð°, Ð¾ÑÑ‚Ð°Ð»Ð¾ÑÑŒ Ð¾Ð³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ðµ: Ñ„Ð°Ð¹Ð»Ñ‹ ÐºÑÑˆÐ¸Ñ€Ð¾Ð²Ð°Ð»Ð¸ÑÑŒ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¿Ð¾ÑÐ»Ðµ Ð²Ñ‚Ð¾Ñ€Ð¾Ð¹ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñ‹. Ð­Ñ‚Ð¾ Ð¿Ñ€Ð¾Ð¸ÑÑ…Ð¾Ð´Ð¸Ñ‚ Ð¸Ð·-Ð·Ð° Ñ‚Ð¾Ð³Ð¾, Ñ‡Ñ‚Ð¾ ServiceWorker Ð´Ð¾Ð±Ð°Ð²Ð»ÑÐµÑ‚ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸Ðº ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ñ [fetch](https://developer.mozilla.org/ru/docs/Web/API/FetchEvent) ÑƒÐ¶Ðµ Ð¿Ð¾ÑÐ»Ðµ Ñ‚Ð¾Ð³Ð¾, ÐºÐ°Ðº Ð²ÑÐµ Ñ€ÐµÑÑƒÑ€ÑÑ‹ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ñ‹. ÐŸÐ¾ÑÐ»Ðµ Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€Ð½Ð¾Ð¹ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñ‹ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸Ðº Ð¾Ñ‚Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ð½Ð° ÐºÐ°Ð¶Ð´Ð¾Ð¼ Ð¾Ð±Ñ€Ð°Ñ‰ÐµÐ½Ð¸Ð¸ Ðº Ñ€ÐµÑÑƒÑ€ÑÐ°Ð¼ Ð¸ Ð´Ð¾Ð±Ð°Ð²Ð¸Ñ‚ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ñ‹Ðµ Ñ„Ð°Ð¹Ð»Ñ‹ Ð² ÐºÑÑˆ.  

Ð¡Ð°Ð¼Ð¾Ðµ Ð¿Ñ€Ð¾ÑÑ‚Ð¾Ðµ Ð¸ Ð»Ð¾Ð³Ð¸Ñ‡Ð½Ð¾Ðµ Ñ€ÐµÑˆÐµÐ½Ð¸Ðµ ÑÑ‚Ð¾Ð¹ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹ - Ð·Ð°ÐºÑÑˆÐ¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ñ€ÐµÑÑƒÑ€ÑÑ‹ Ð² Ð¼Ð¾Ð¼ÐµÐ½Ñ‚ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸ ServiceWorker-Ð° Ñ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒÑŽ Ð¼ÐµÑ‚Ð¾Ð´Ð° [cache.addAll()](https://developer.mozilla.org/ru/docs/Web/API/Cache/addAll). ÐžÐ½ Ð¿Ñ€Ð¸Ð½Ð¸Ð¼Ð°ÐµÑ‚ Ð½Ð° Ð²Ñ…Ð¾Ð´ Ð¼Ð°ÑÑÐ¸Ð² URLs, Ð¿Ð¾Ð»ÑƒÑ‡Ð°ÐµÑ‚ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¸ ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÐµÑ‚ Ð¸Ñ… Ð² ÐºÑÑˆ.  

## ÐžÑ‚Ð²ÐµÑ‚Ñ‹ Ð½Ð° Ð´Ð¾Ð¿. Ð²Ð¾Ð¿Ñ€Ð¾ÑÑ‹  

### Ð’Ð¾Ð¿Ñ€Ð¾Ñ â„–1: Ð·Ð°Ñ‡ÐµÐ¼ Ð½ÑƒÐ¶ÐµÐ½ ÑÑ‚Ð¾Ñ‚ Ð²Ñ‹Ð·Ð¾Ð²?
`self.skipWaiting()`  

Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ Ð½Ð° ÑÑ‚Ð°Ð¿Ðµ installing Ð´Ð»Ñ Ð½ÐµÐ¼ÐµÐ´Ð»ÐµÐ½Ð½Ð¾Ð³Ð¾ Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´Ð° Ðº ÑÑ‚Ð°Ð¿Ñƒ activating. Ð¢Ð°Ðº, ServiceWorker Ð¿Ñ€Ð¾Ð¿ÑƒÑÐºÐ°ÐµÑ‚ ÑÑ‚Ð°Ð¿ installed, Ð² ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ð¼ Ð¾Ð½ Ð¾Ð¶Ð¸Ð´Ð°ÐµÑ‚ Ð¾ÐºÐ¾Ð½Ñ‡Ð°Ð½Ð¸Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ð´Ñ€ÑƒÐ³Ð¸Ñ… ServiceWorker-Ð¾Ð². Ð’ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ðµ, ServiceWorker Ð½Ð°Ñ‡Ð¸Ð½Ð°ÐµÑ‚ Ñ€Ð°Ð±Ð¾Ñ‚Ñƒ ÑÑ€Ð°Ð·Ñƒ Ð¿Ð¾ÑÐ»Ðµ Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ð¸. [ÐŸÐ¾Ð´Ñ€Ð¾Ð±Ð½ÐµÐµ](https://mdn.mozillademos.org/files/12636/sw-lifecycle.png)  

### Ð’Ð¾Ð¿Ñ€Ð¾Ñ â„–2: Ð·Ð°Ñ‡ÐµÐ¼ Ð½ÑƒÐ¶ÐµÐ½ ÑÑ‚Ð¾Ñ‚ Ð²Ñ‹Ð·Ð¾Ð²?
`self.clients.claim()`  

ÐŸÐ¾-ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ, ServiceWorker ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑÑ Ð°ÐºÑ‚Ð¸Ð²Ð½Ñ‹Ð¼ Ð¸ Ð½Ð°Ñ‡Ð¸Ð½Ð°ÐµÑ‚ Ð¾Ð±Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°Ñ‚ÑŒ Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¿Ð¾ÑÐ»Ðµ Ð¿ÐµÑ€ÐµÐ·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñ‹. Ð’Ñ‹Ð·Ð¾Ð² `self.clients.claim()` Ð½Ð° ÑÑ‚Ð°Ð¿Ðµ activating Ð² ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¸ active Ð·Ð°ÑÑ‚Ð°Ð²Ð»ÑÐµÑ‚ ServiceWorker Ð½Ð°Ñ‡Ð°Ñ‚ÑŒ Ñ€Ð°Ð±Ð¾Ñ‚Ñƒ Ð½ÐµÐ¼ÐµÐ´Ð»ÐµÐ½Ð½Ð¾. [ÐŸÐ¾Ð´Ñ€Ð¾Ð±Ð½ÐµÐµ](https://mdn.mozillademos.org/files/12636/sw-lifecycle.png)  
  
### Ð’Ð¾Ð¿Ñ€Ð¾Ñ â„–3: Ð´Ð»Ñ Ð²ÑÐµÑ… Ð»Ð¸ ÑÐ»ÑƒÑ‡Ð°ÐµÐ² Ð¿Ð¾Ð´Ð¾Ð¹Ð´Ñ‘Ñ‚ Ñ‚Ð°ÐºÐ¾Ðµ Ð¿Ð¾ÑÑ‚Ñ€Ð¾ÐµÐ½Ð¸Ðµ ÐºÐ»ÑŽÑ‡Ð°?  
`const cacheKey = url.origin + url.pathname`  
Ð¢Ð°ÐºÐ¾Ð¹ ÐºÐ»ÑŽÑ‡ Ð½Ðµ ÑƒÑ‡Ð¸Ñ‚Ñ‹Ð²Ð°ÐµÑ‚ query-Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹. ÐžÐ±ÑŠÐµÐºÑ‚ url ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ñ‚ ÑÐ²Ð¾Ð¹ÑÑ‚Ð²Ð¾ search, Ð² ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ð¼ ÐºÐ°Ðº-Ñ€Ð°Ð· Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑÑ query-ÑÑ‚Ñ€Ð¾ÐºÐ°.  
  
### Ð’Ð¾Ð¿Ñ€Ð¾Ñ â„–4: Ð·Ð°Ñ‡ÐµÐ¼ Ð½ÑƒÐ¶Ð½Ð° ÑÑ‚Ð° Ñ†ÐµÐ¿Ð¾Ñ‡ÐºÐ° Ð²Ñ‹Ð·Ð¾Ð²Ð¾Ð²?  
```
return caches.keys()
  .then(names => {
    return Promise.all(
      // Ð¦ÐµÐ¿Ð¾Ñ‡ÐºÐ° Ð²Ñ‹Ð·Ð¾Ð²Ð¾Ð²
      names.filter(name => name !== CACHE_VERSION)
        .map(name => {
          console.log('[ServiceWorker] Deleting obsolete cache:', name);
          return caches.delete(name);
        })
    );
  });
```  
Ð”Ð»Ñ Ð½Ð°Ñ‡Ð°Ð»Ð° Ð¿Ñ€Ð¾ Ð²ÐµÑÑŒ ÐºÑƒÑÐ¾Ðº ÐºÐ¾Ð´Ð°. ÐžÐ½ Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑÑ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð² Ñ‚Ð¾Ð¼ ÑÐ»ÑƒÑ‡Ð°Ðµ, ÐµÑÐ»Ð¸ Ð³Ð»Ð¾Ð±Ð°Ð»ÑŒÐ½Ð°Ñ Ð²ÐµÑ€ÑÐ¸Ñ ÐºÐµÑˆÐ° Ð¸Ð·Ð¼ÐµÐ½Ð¸Ñ‚ÑÑ. Ð’Ñ‹Ð·Ð¾Ð² `caches.keys()` Ð²ÐµÑ€Ð½ÐµÑ‚ Ð¿Ñ€Ð¾Ð¼Ð¸Ñ Ñ ÐºÐ»ÑŽÑ‡Ð°Ð¼Ð¸ Ð²ÑÐµÑ… Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ñ‹ ServiceWorker-Ñƒ. `Promise.all()` Ð²ÐµÑ€Ð½ÐµÑ‚ resolved-Ð¿Ñ€Ð¾Ð¼Ð¸Ñ, ÐµÑÐ»Ð¸ Ð²ÑÐµ Ð¿ÐµÑ€ÐµÐ´Ð°Ð½Ð½Ñ‹Ðµ ÐµÐ¼Ñƒ Ð¿Ñ€Ð¾Ð¼Ð¸ÑÑ‹ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÑ‚ÑÑ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾.  
Ð¢ÐµÐ¿ÐµÑ€ÑŒ Ð¿Ñ€Ð¾ Ñ†ÐµÐ¿Ð¾Ñ‡ÐºÑƒ Ð²Ñ‹Ð·Ð¾Ð²Ð¾Ð². `names.filter(name => name !== CACHE_VERSION)` Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚ Ð²ÑÐµ Ð²ÐµÑ€ÑÐ¸Ð¸ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰ Ð¸ Ð¾Ñ‚Ð±Ñ€Ð°ÑÑ‹Ð²Ð°ÐµÑ‚ Ð°ÐºÑ‚ÑƒÐ°Ð»ÑŒÐ½Ñ‹Ðµ. `.map(name => caches.delete(name))` ÑƒÐ´Ð°Ð»ÑÐµÑ‚ Ð½ÐµÐ°ÐºÑ‚ÑƒÐ°Ð»ÑŒÐ½Ñ‹Ðµ Ð²ÐµÑ€ÑÐ¸Ð¸ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰ Ð¸ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ Ð¼Ð°ÑÑÐ¸Ð² resolved- Ð¸Ð»Ð¸ rejected-Ð¿Ñ€Ð¾Ð¼Ð¸ÑÐ¾Ð² Ð² Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸ Ð¾Ñ‚ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾Ð¾Ð³Ð¾ Ð¸Ð»Ð¸ Ð½ÐµÑƒÑÐ¿ÐµÑˆÐ½Ð¾Ð³Ð¾ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ.  
  
### Ð’Ð¾Ð¿Ñ€Ð¾Ñ â„–5: Ð´Ð»Ñ Ñ‡ÐµÐ³Ð¾ Ð½ÑƒÐ¶Ð½Ð¾ ÐºÐ»Ð¾Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ?  
`cache.put(cacheKey, response.clone())`  
`cache.put()` Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ Ð´Ð»Ñ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ñ Ð² ÐºÐµÑˆ Ð·Ð°Ð¿Ñ€Ð°ÑˆÐ¸Ð²Ð°ÐµÐ¼Ð¾Ð³Ð¾ Ñ€ÐµÑÑƒÑ€ÑÐ°. Ð—Ð´ÐµÑÑŒ response - ÑÑ‚Ð¾ Ð¿Ð¾Ñ‚Ð¾Ðº, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ ÑÐ¾Ð·Ð´Ð°ÐµÑ‚ÑÑ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÐµÐ¹ fetch Ð¸ Ð¿Ñ€Ð¾ÐºÐ¸Ð´Ñ‹Ð²Ð°ÐµÑ‚ÑÑ Ð² Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸Ðº resolved-Ð¿Ñ€Ð¾Ð¼Ð¸ÑÐ°. ÐŸÐ¾Ñ‚Ð¾Ðº response Ð¼Ð¾Ð¶ÐµÑ‚ Ð±Ñ‹Ñ‚ÑŒ Ð¿Ñ€Ð¾Ñ‡Ð¸Ñ‚Ð°Ð½ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¾Ð´Ð¸Ð½ Ñ€Ð°Ð·. Ð¡Ð¾Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²ÐµÐ½Ð½Ð¾, ÐµÑÐ»Ð¸ Ð¿Ñ€Ð¾Ñ‡Ð¸Ñ‚Ð°Ñ‚ÑŒ Ð¸Ð· Ð½ÐµÐ³Ð¾ Ð² ServiceWorker-Ðµ, Ð¾ÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ Ð¿Ð¾Ñ‚Ð¾Ðº Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ð² Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€Ðµ Ð½Ðµ ÑÐ¼Ð¾Ð¶ÐµÑ‚ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ð´Ð¾ÑÑ‚ÑƒÐ¿ Ðº ÑÑ‚Ð¾Ð¼Ñƒ Ð¿Ð¾Ñ‚Ð¾ÐºÑƒ. Ð ÐµÑˆÐµÐ½Ð¸Ðµ - ÑÐºÐ»Ð¾Ð½Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¿Ð¾Ñ‚Ð¾Ðº Ñ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒÑŽ `response.clone()`. [ÐŸÐ¾Ð´Ñ€Ð¾Ð±Ð½ÐµÐµ](https://developer.mozilla.org/en-US/docs/Web/API/Response/clone)

## Ð—Ð°Ð¿ÑƒÑÐº
$ npm i http-server  
$ http-server  
-> localhost:8080/gifs.html
